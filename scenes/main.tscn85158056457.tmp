[gd_scene load_steps=2 format=3 uid="uid://dt65cb74r1fwd"]

[sub_resource type="GDScript" id="GDScript_sgp6g"]
script/source = "extends Node2D

var mapScore := 0

var data:MySaveData = load(\"res://files/points.tres\")

var tileScene = preload(\"res://scenes/terrain_piece.tscn\")

var playerScene = preload(\"res://scenes/player.tscn\")

var sizes = [[5,6], [5,13], [9, 9]]
var types = [\"mountain\", \"field\", \"snow\"]
var coordinates = [Vector2(10,10), Vector2(-500, -500), Vector2(-300, 500)]


func victory():
	var old = get_meta(\"savescore\")
	var new = old + mapScore
	set_meta(\"savescore\", new)
	
func makesize():
	return [randi_range(5,10), randi_range(5,10)]


func _ready() -> void:
	sizes = []
	for i in range(3):
		var list = makesize()
		sizes.append(list)
	for i in range(3):
		var index = i-1
		var tile = tileScene.instantiate()
		tile.horizon = sizes[index][0]
		tile.depth = sizes[index][1]
		tile.tileType = types[index]
		tile.global_position = coordinates[index]
		add_child(tile)
		print(\"Tile has \", str(tile.neighbors.size()), \" neighbors.\")
	
	var player = playerScene.instantiate()
	player.dev = false
	player.global_position = Vector2(10, 10)
	add_child(player)
"

[node name="main" type="Node2D"]
script = SubResource("GDScript_sgp6g")
metadata/savescore = 0
